See http://lua-users.org/lists/lua-l/2011-08/msg01189.html
